<!DOCTYPE html>
<div class="tool-container" id="todoTool">
    <div class="tool-header">
        <h2><i class="fas fa-tasks"></i> Tâches</h2>
        <div class="tool-actions">
            <button type="button" class="btn-icon" id="todoSearch" aria-label="Rechercher">
                <i class="fas fa-search"></i>
            </button>
            <button type="button" class="btn-icon" id="todoHelp" aria-label="Aide">
                <i class="fas fa-question-circle"></i>
            </button>
            <button type="button" class="btn-icon fullscreen-btn" id="todoFullscreenBtn" aria-label="Plein écran">
                <i class="fas fa-expand"></i>
            </button>
        </div>
    </div>
    
    <div class="tool-content">
        <div class="todo-container">
            <div class="todo-sidebar">
                <div class="todo-header">
                    <h3>Catégories</h3>
                    <button type="button" class="btn-icon" id="addNewList" aria-label="Nouvelle liste">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                
                <div class="todo-lists" id="listsContainer">
                    <div class="list-item active" data-list-id="default">
                        <i class="fas fa-list"></i>
                        <span>Tâches</span>
                        <span class="list-count">0</span>
                    </div>
                    <div class="list-item" data-list-id="today">
                        <i class="fas fa-calendar-day"></i>
                        <span>Aujourd'hui</span>
                        <span class="list-count">0</span>
                    </div>
                    <div class="list-item" data-list-id="important">
                        <i class="fas fa-star"></i>
                        <span>Important</span>
                        <span class="list-count">0</span>
                    </div>
                    <div class="list-item" data-list-id="completed">
                        <i class="fas fa-check-circle"></i>
                        <span>Terminé</span>
                        <span class="list-count">0</span>
                    </div>
                    <!-- Les listes personnalisées seront ajoutées ici -->
                </div>
                
                <div class="todo-sidebar-actions">
                    <button type="button" class="btn btn-outline" id="exportAllLists">
                        <i class="fas fa-download"></i> Exporter
                    </button>
                    <button type="button" class="btn btn-outline" id="importLists">
                        <i class="fas fa-upload"></i> Importer
                    </button>
                </div>
            </div>
            
            <div class="todo-main">
                <div class="todo-main-header">
                    <h3 id="currentListTitle">Tâches</h3>
                    <div class="todo-actions">
                        <div class="search-container">
                            <input type="text" id="searchTasks" placeholder="Rechercher des tâches..." class="search-input">
                        </div>
                        <div class="todo-filter">
                            <select id="todoFilter" class="form-select">
                                <option value="all">Toutes</option>
                                <option value="active">Actives</option>
                                <option value="completed">Terminées</option>
                            </select>
                        </div>
                        <div class="todo-sort">
                            <select id="todoSort" class="form-select">
                                <option value="added">Date d'ajout</option>
                                <option value="due">Date d'échéance</option>
                                <option value="priority">Priorité</option>
                                <option value="alphabetical">Alphabétique</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="todo-add-container">
                    <form id="addTodoForm">
                        <div class="todo-input-group">
                            <input type="text" id="newTodoInput" placeholder="Ajouter une tâche..." class="todo-input" required>
                            <div class="todo-quick-actions">
                                <button type="button" class="btn-icon" id="quickPriority" aria-label="Définir la priorité">
                                    <i class="fas fa-flag"></i>
                                </button>
                                <button type="button" class="btn-icon" id="quickDate" aria-label="Définir la date">
                                    <i class="fas fa-calendar-alt"></i>
                                </button>
                                <button type="submit" class="btn-icon add-todo" aria-label="Ajouter la tâche">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                
                <div class="todo-list-container">
                    <div class="todo-list" id="todoList">
                        <!-- Liste des tâches générée dynamiquement -->
                    </div>
                </div>
                
                <div class="todo-summary">
                    <div class="todo-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="todoProgress" style="width: 0%"></div>
                        </div>
                        <div class="progress-text">
                            <span id="completedCount">0</span> sur <span id="totalCount">0</span> tâches terminées
                        </div>
                    </div>
                    <div class="todo-actions">
                        <button type="button" class="btn btn-sm" id="clearCompletedTasks">
                            <i class="fas fa-trash-alt"></i> Supprimer les tâches terminées
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="todo-details" id="todoDetails">
                <div class="details-header">
                    <h3>Détails de la tâche</h3>
                    <button type="button" class="btn-icon" id="closeTodoDetails">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="details-content">
                    <div class="details-title">
                        <input type="text" id="detailsTitle" placeholder="Titre de la tâche" class="details-input">
                    </div>
                    
                    <div class="details-group">
                        <label for="detailsPriority">Priorité</label>
                        <div class="priority-selector">
                            <button class="priority-btn" data-priority="low" id="priorityLow">Faible</button>
                            <button class="priority-btn" data-priority="medium" id="priorityMedium">Moyenne</button>
                            <button class="priority-btn" data-priority="high" id="priorityHigh">Élevée</button>
                            <input type="hidden" id="detailsPriority" value="medium">
                        </div>
                    </div>
                    
                    <div class="details-group">
                        <label for="detailsDueDate">Date d'échéance</label>
                        <input type="date" id="detailsDueDate" class="form-input">
                    </div>
                    
                    <div class="details-group">
                        <label for="detailsNotes">Notes</label>
                        <textarea id="detailsNotes" placeholder="Ajouter des notes..." class="details-textarea"></textarea>
                    </div>
                    
                    <div class="details-group">
                        <div class="details-label-inline">
                            <input type="checkbox" id="detailsReminder" class="checkbox-input">
                            <label for="detailsReminder">Ajouter un rappel</label>
                        </div>
                        <div class="reminder-options" id="reminderOptions">
                            <input type="datetime-local" id="reminderDateTime" class="form-input">
                        </div>
                    </div>
                    
                    <div class="details-group">
                        <label>Sous-tâches</label>
                        <div class="subtasks-container">
                            <div class="subtask-add">
                                <input type="text" id="newSubtask" placeholder="Ajouter une sous-tâche..." class="form-input">
                                <button type="button" class="btn-icon" id="addSubtask">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <div class="subtasks-list" id="subtasksList">
                                <!-- Les sous-tâches seront ajoutées ici -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="details-group">
                        <label for="detailsTag">Tags</label>
                        <div class="tag-input-container">
                            <input type="text" id="detailsTag" placeholder="Ajouter un tag..." class="form-input">
                            <button type="button" class="btn-icon" id="addTag">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="tags-list" id="tagsList">
                            <!-- Les tags seront ajoutés ici -->
                        </div>
                    </div>
                </div>
                
                <div class="details-footer">
                    <div class="details-info">
                        <span>Créée le <span id="createdDate">01/01/2024</span></span>
                    </div>
                    <div class="details-actions">
                        <button type="button" class="btn btn-outline btn-danger" id="deleteTodo">
                            <i class="fas fa-trash-alt"></i> Supprimer
                        </button>
                        <button type="button" class="btn btn-primary" id="saveTodoDetails">
                            <i class="fas fa-save"></i> Enregistrer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Dialogue pour ajouter une nouvelle liste -->
    <div class="modal" id="newListModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nouvelle liste</h3>
                <button type="button" class="btn-icon" id="closeNewListModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="newListForm">
                    <div class="form-group">
                        <label for="newListName">Nom de la liste</label>
                        <input type="text" id="newListName" placeholder="Entrez un nom..." required>
                    </div>
                    <div class="form-group">
                        <label for="newListIcon">Icône</label>
                        <div class="icon-selector" id="iconSelector">
                            <button type="button" class="icon-btn" data-icon="list"><i class="fas fa-list"></i></button>
                            <button type="button" class="icon-btn" data-icon="home"><i class="fas fa-home"></i></button>
                            <button type="button" class="icon-btn" data-icon="briefcase"><i class="fas fa-briefcase"></i></button>
                            <button type="button" class="icon-btn" data-icon="shopping-cart"><i class="fas fa-shopping-cart"></i></button>
                            <button type="button" class="icon-btn" data-icon="dumbbell"><i class="fas fa-dumbbell"></i></button>
                            <button type="button" class="icon-btn" data-icon="plane"><i class="fas fa-plane"></i></button>
                            <button type="button" class="icon-btn" data-icon="book"><i class="fas fa-book"></i></button>
                            <button type="button" class="icon-btn" data-icon="euro-sign"><i class="fas fa-euro-sign"></i></button>
                            <button type="button" class="icon-btn" data-icon="heartbeat"><i class="fas fa-heartbeat"></i></button>
                        </div>
                        <input type="hidden" id="newListIcon" value="list">
                    </div>
                    <div class="form-group">
                        <label for="newListColor">Couleur</label>
                        <div class="color-selector">
                            <button type="button" class="color-btn" data-color="#007bff" style="background-color: #007bff;"></button>
                            <button type="button" class="color-btn" data-color="#28a745" style="background-color: #28a745;"></button>
                            <button type="button" class="color-btn" data-color="#dc3545" style="background-color: #dc3545;"></button>
                            <button type="button" class="color-btn" data-color="#ffc107" style="background-color: #ffc107;"></button>
                            <button type="button" class="color-btn" data-color="#6610f2" style="background-color: #6610f2;"></button>
                            <button type="button" class="color-btn" data-color="#fd7e14" style="background-color: #fd7e14;"></button>
                        </div>
                        <input type="hidden" id="newListColor" value="#007bff">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" id="cancelNewList">Annuler</button>
                <button type="button" class="btn btn-primary" id="confirmNewList">Créer</button>
            </div>
        </div>
    </div>
    
    <!-- Panneau de recherche avancée -->
    <div class="search-panel" id="searchPanel">
        <div class="search-panel-header">
            <h3>Recherche avancée</h3>
            <button type="button" class="btn-icon" id="closeSearchPanel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="search-panel-content">
            <div class="search-form">
                <div class="form-group">
                    <label for="searchQuery">Texte à rechercher</label>
                    <input type="text" id="searchQuery" placeholder="Mots-clés..." class="form-input">
                </div>
                <div class="form-group">
                    <label>Listes à rechercher</label>
                    <div id="searchListsOptions">
                        <!-- Sera rempli dynamiquement -->
                    </div>
                </div>
                <div class="form-group">
                    <label>Priorité</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" value="high" checked> Élevée</label>
                        <label><input type="checkbox" value="medium" checked> Moyenne</label>
                        <label><input type="checkbox" value="low" checked> Faible</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" value="completed" checked> Terminées</label>
                        <label><input type="checkbox" value="active" checked> Actives</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="searchDateRange">Période</label>
                    <select id="searchDateRange" class="form-select">
                        <option value="all">Toutes les dates</option>
                        <option value="today">Aujourd'hui</option>
                        <option value="week">Cette semaine</option>
                        <option value="month">Ce mois-ci</option>
                        <option value="custom">Personnalisé...</option>
                    </select>
                </div>
                <div class="form-group date-range" id="customDateRange" style="display: none;">
                    <div>
                        <label for="searchDateFrom">Du</label>
                        <input type="date" id="searchDateFrom" class="form-input">
                    </div>
                    <div>
                        <label for="searchDateTo">Au</label>
                        <input type="date" id="searchDateTo" class="form-input">
                    </div>
                </div>
            </div>
            <div class="search-actions">
                <button type="button" class="btn" id="resetSearch">Réinitialiser</button>
                <button type="button" class="btn btn-primary" id="runSearch">Rechercher</button>
            </div>
        </div>
        <div class="search-results" id="searchResults">
            <!-- Résultats de recherche -->
        </div>
    </div>
    
    <div class="help-panel" id="todoHelpPanel">
        <div class="help-panel-header">
            <h3>Aide - Liste de tâches</h3>
            <button type="button" class="btn-icon" id="closeTodoHelp">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="help-panel-content">
            <h4>Comment utiliser</h4>
            <ol>
                <li>Organisez vos tâches en créant différentes listes (travail, personnel, etc.)</li>
                <li>Ajoutez des tâches en utilisant le champ de saisie et la touche Entrée</li>
                <li>Cliquez sur une tâche pour voir et modifier ses détails</li>
                <li>Cochez une tâche pour la marquer comme terminée</li>
                <li>Utilisez les filtres et le tri pour organiser l'affichage de vos tâches</li>
                <li>Utilisez la recherche avancée pour retrouver facilement vos tâches</li>
            </ol>
            
            <h4>Fonctionnalités</h4>
            <ul>
                <li><strong>Priorités</strong> : définissez l'importance de chaque tâche</li>
                <li><strong>Dates d'échéance</strong> : ne manquez plus vos délais</li>
                <li><strong>Sous-tâches</strong> : divisez les tâches complexes en étapes plus petites</li>
                <li><strong>Rappels</strong> : recevez des notifications pour les tâches importantes</li>
                <li><strong>Tags</strong> : catégorisez vos tâches pour les retrouver plus facilement</li>
                <li><strong>Recherche avancée</strong> : filtrez vos tâches selon divers critères</li>
                <li><strong>Export/Import</strong> : sauvegardez et partagez vos listes</li>
            </ul>
            
            <h4>Astuces</h4>
            <ul>
                <li>Utilisez les touches rapides pour ajouter rapidement des tâches avec priorité et date</li>
                <li>Créez des listes colorées pour mieux visualiser vos différents projets</li>
                <li>Utilisez des tags pour regrouper des tâches similaires à travers différentes listes</li>
                <li>Exportez régulièrement vos listes pour sauvegarder vos données</li>
            </ul>
        </div>
    </div>





<script>
// S'assurer que le module de plein écran est chargé
(function() {
    function initFullscreen() {
        if (!window.fullscreenManager) {
            import('../../js/fullscreen.js')
            .then(() => {
                if (!window.fullscreenManager && typeof FullscreenManager !== 'undefined') {
                    window.fullscreenManager = new FullscreenManager();
                }
            })
            .catch(error => {
                console.error('Erreur chargement fullscreen.js:', error);
            });
        } else {
            window.fullscreenManager.initFullscreenButtons();
        }
    }
    
    // Exécuter immédiatement si le DOM est déjà chargé, sinon attendre l'événement
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initFullscreen);
    } else {
        initFullscreen();
    }
})();
</script></div> 
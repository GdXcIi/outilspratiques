<!DOCTYPE html>
<div class="tool-container" id="translatorTool">
    <div class="tool-header">
        <h2><i class="fas fa-language"></i> Traducteur</h2>
        <div class="tool-actions">
            <span class="connection-status" id="connectionStatus">
                <i class="fas fa-wifi"></i> En ligne
            </span>
            <button type="button" class="btn-icon" id="translatorHelp" aria-label="Aide">
                <i class="fas fa-question-circle"></i>
            </button>
            <button type="button" class="btn-icon fullscreen-btn" id="translatorFullscreenBtn" aria-label="Plein écran">
                <i class="fas fa-expand"></i>
            </button>
        </div>
    </div>
    
    <div class="tool-content">
        <div class="translator-horizontal-layout">
            <div class="translator-main-panel">
                <div class="translator-options">
                    <div class="language-selector">
                        <div class="source-language">
                            <select id="sourceLanguage" class="form-select">
                                <option value="auto">Détecter la langue</option>
                                <option value="fr">Français</option>
                                <option value="en">Anglais</option>
                                <option value="es">Espagnol</option>
                                <option value="de">Allemand</option>
                                <option value="it">Italien</option>
                                <option value="pt">Portugais</option>
                            </select>
                        </div>
                        
                        <button type="button" class="btn-icon" id="swapLanguages" aria-label="Inverser les langues" onclick="swapLanguages()">
                            <i class="fas fa-exchange-alt"></i>
                        </button>
                        
                        <div class="target-language">
                            <select id="targetLanguage" class="form-select">
                                <option value="fr" selected>Français</option>
                                <option value="en">Anglais</option>
                                <option value="es">Espagnol</option>
                                <option value="de">Allemand</option>
                                <option value="it">Italien</option>
                                <option value="pt">Portugais</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="translator-text-container">
                    <div class="source-text-container">
                        <div class="text-actions">
                            <span class="detected-language" id="detectedLanguage"></span>
                            <div class="text-buttons">
                                <button type="button" class="btn-icon" id="clearSourceText" aria-label="Effacer" onclick="clearSourceText()">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button type="button" class="btn-icon" id="copySourceText" aria-label="Copier" onclick="copySourceText()">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button type="button" class="btn-icon" id="listenSourceText" aria-label="Écouter" onclick="listenSourceText()">
                                    <i class="fas fa-volume-up"></i>
                                </button>
                            </div>
                        </div>
                        <textarea id="sourceText" class="translator-textarea" placeholder="Saisissez ou collez le texte à traduire..."></textarea>
                        <div class="character-count">
                            <span id="sourceCharCount">0/5000</span> caractères
                        </div>
                    </div>
                    
                    <div class="target-text-container">
                        <div class="text-actions">
                            <div class="translation-status" id="translationStatus"></div>
                            <div class="text-buttons">
                                <button type="button" class="btn-icon" id="copyTranslation" aria-label="Copier" onclick="copyTranslation()">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button type="button" class="btn-icon" id="listenTranslation" aria-label="Écouter" onclick="listenTranslation()">
                                    <i class="fas fa-volume-up"></i>
                                </button>
                            </div>
                        </div>
                        <textarea id="translatedText" class="translator-textarea" placeholder="Traduction..." readonly></textarea>
                        <div class="character-count">
                            <span id="translatedCharCount">0/5000</span> caractères
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="translator-sidebar">
                <div class="translation-history">
                    <div class="history-header">
                        <h3>Historique</h3>
                        <button type="button" class="btn-icon" id="clearHistory" aria-label="Effacer l'historique" onclick="clearHistory()">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                    <div id="translationHistory" class="history-items">
                        <!-- L'historique des traductions sera affiché ici -->
                        <div class="empty-history">Aucune traduction récente</div>
                    </div>
                </div>
                
                <div class="translation-tips">
                    <h3>Conseils de traduction</h3>
                    <ul class="tips-list">
                        <li><i class="fas fa-info-circle"></i> Utilisez des phrases complètes pour une meilleure traduction</li>
                        <li><i class="fas fa-info-circle"></i> Vérifiez les résultats pour les expressions idiomatiques</li>
                        <li><i class="fas fa-info-circle"></i> La détection automatique fonctionne mieux avec plus de texte</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="help-panel" id="translatorHelpPanel">
        <div class="help-panel-header">
            <h3>Aide - Traducteur</h3>
            <button type="button" class="btn-icon" id="closeTranslatorHelp">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="help-panel-content">
            <h4>Comment utiliser</h4>
            <ol>
                <li>Sélectionnez la langue source (ou laissez la détection automatique)</li>
                <li>Sélectionnez la langue cible</li>
                <li>Saisissez ou collez le texte à traduire</li>
                <li>La traduction s'affiche automatiquement</li>
                <li>Utilisez les boutons pour copier ou écouter la traduction</li>
            </ol>
            
            <h4>Fonctionnalités</h4>
            <ul>
                <li><strong>Détection de langue améliorée</strong> : identifie automatiquement la langue du texte source avec précision</li>
                <li><strong>Traduction en ligne</strong> : utilise l'API MyMemory pour des traductions de qualité</li>
                <li><strong>Mode hors ligne</strong> : fonctionne aussi sans connexion internet (traduction basique)</li>
                <li><strong>Synthèse vocale optimisée</strong> : écoutez le texte source ou traduit avec une voix claire et naturelle</li>
                <li><strong>Historique</strong> : accédez à vos traductions récentes</li>
            </ul>
            
            <h4>Confidentialité</h4>
            <p>En mode en ligne, les textes sont envoyés au service de traduction MyMemory. En mode hors ligne, vos textes ne quittent jamais votre ordinateur.</p>
        </div>
    </div>

<script>
// S'assurer que le module de plein écran est chargé
(function() {
    function initFullscreen() {
        if (!window.fullscreenManager) {
            import('../../js/fullscreen.js')
            .then(() => {
                if (!window.fullscreenManager && typeof FullscreenManager !== 'undefined') {
                    window.fullscreenManager = new FullscreenManager();
                }
            })
            .catch(error => {
                console.error('Erreur chargement fullscreen.js:', error);
            });
        } else {
            window.fullscreenManager.initFullscreenButtons();
        }
    }
    
    // Initialiser l'aide du traducteur
    function initTranslatorHelp() {
        const helpBtn = document.getElementById('translatorHelp');
        const helpPanel = document.getElementById('translatorHelpPanel');
        const closeBtn = document.getElementById('closeTranslatorHelp');
        
        if (helpBtn && helpPanel && closeBtn) {
            helpBtn.addEventListener('click', () => {
                helpPanel.classList.toggle('visible');
            });
            
            closeBtn.addEventListener('click', () => {
                helpPanel.classList.remove('visible');
            });
        }
    }
    
    // Exécuter les fonctions d'initialisation
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            initFullscreen();
            initTranslatorHelp();
        });
    } else {
        initFullscreen();
        initTranslatorHelp();
    }
})();
</script></div> 
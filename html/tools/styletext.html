<!DOCTYPE html>
<div class="tool-container" id="styletextTool">
    <div class="tool-header">
        <h2><i class="fas fa-feather-alt"></i> Styliseur de texte</h2>
        <div class="tool-actions">
            <button type="button" class="btn-icon" id="styletextHelp" aria-label="Aide">
                <i class="fas fa-question-circle"></i>
            </button>
            <button type="button" class="btn-icon fullscreen-btn" id="styletextFullscreenBtn" aria-label="Plein écran">
                <i class="fas fa-expand"></i>
            </button>
        </div>
    </div>
    
    <div class="tool-content">
        <div class="styletext-layout">
            <div class="styletext-input-area">
                <textarea id="inputText" placeholder="Saisissez ou collez votre texte ici..." class="styletext-textarea"></textarea>
                <div class="input-controls">
                    <div class="character-count">
                        <span id="inputCounter">0</span> caractères
                    </div>
                    <div class="input-actions">
                        <button type="button" class="control-btn" id="clearText">
                            <i class="fas fa-times"></i> Effacer
                        </button>
                        <button type="button" class="control-btn" id="pasteText">
                            <i class="fas fa-paste"></i> Coller
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="styletext-styles-area">
                <h3 class="area-title">Choisissez un style</h3>
                <div class="style-list">
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="normal" checked>
                        <span class="style-item-content">
                            <span class="style-name">Normal</span>
                            <span class="style-preview">Abc</span>
                        </span>
                    </label>
                    
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="outline">
                        <span class="style-item-content">
                            <span class="style-name">Police de contour</span>
                            <span class="style-preview">𝕒𝕓𝕔</span>
                        </span>
                    </label>
                    
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="squared">
                        <span class="style-item-content">
                            <span class="style-name">Texte carré</span>
                            <span class="style-preview">🅐🅑🅒</span>
                        </span>
                    </label>
                    
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="smallcaps">
                        <span class="style-item-content">
                            <span class="style-name">Petites majuscules</span>
                            <span class="style-preview">ᴀʙᴄ</span>
                        </span>
                    </label>
                    
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="bold">
                        <span class="style-item-content">
                            <span class="style-name">Gras</span>
                            <span class="style-preview">𝐀𝐛𝐜</span>
                        </span>
                    </label>
                    
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="fraktur">
                        <span class="style-item-content">
                            <span class="style-name">Vieux texte anglais</span>
                            <span class="style-preview">𝔄𝔟𝔠</span>
                        </span>
                    </label>
                    
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="flipped">
                        <span class="style-item-content">
                            <span class="style-name">Texte à l'envers</span>
                            <span class="style-preview">ɐqɔ</span>
                        </span>
                    </label>
                    
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="serif">
                        <span class="style-item-content">
                            <span class="style-name">Police serif</span>
                            <span class="style-preview">𝐀𝐛𝐜</span>
                        </span>
                    </label>
                    
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="script">
                        <span class="style-item-content">
                            <span class="style-name">Lettres cursives</span>
                            <span class="style-preview">𝓐𝓫𝓬</span>
                        </span>
                    </label>
                    
                    <label class="style-item">
                        <input type="radio" name="textStyle" value="superscript">
                        <span class="style-item-content">
                            <span class="style-name">Exposant</span>
                            <span class="style-preview">ᴬᵇᶜ</span>
                        </span>
                    </label>
                </div>
            </div>
            
            <div class="styletext-output-area">
                <textarea id="outputText" readonly class="styletext-output"></textarea>
                <div class="output-controls">
                    <button type="button" class="primary-btn" id="copyButton">
                        <i class="fas fa-copy"></i> Copier dans le Presse-papiers
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="help-panel" id="styletextHelpPanel">
        <div class="help-panel-header">
            <h3>Aide - Styliseur de texte</h3>
            <button type="button" class="btn-icon" id="closeStyletextHelp">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="help-panel-content">
            <h4>Comment utiliser</h4>
            <ol>
                <li>Saisissez ou collez votre texte dans la zone "Texte à styliser"</li>
                <li>Sélectionnez un style parmi les options disponibles</li>
                <li>Le texte stylisé apparaît automatiquement dans la zone de sortie</li>
                <li>Utilisez le bouton "Copier" pour copier le texte stylisé dans le presse-papier</li>
            </ol>
            
            <h4>Styles disponibles</h4>
            <ul>
                <li><strong>Normal</strong> : Texte normal sans transformation</li>
                <li><strong>Police de contour</strong> : 𝕡𝕠𝕝𝕚𝕔𝕖 𝕕𝕖 𝕔𝕠𝕟𝕥𝕠𝕦𝕣 - style double avec contour</li>
                <li><strong>Texte carré</strong> : 🅣🅔🅧🅣🅔 🅒🅐🅡🅡🅔 - lettres dans des carrés</li>
                <li><strong>Petites majuscules</strong> : ᴘᴇᴛɪᴛᴇs ᴍᴀᴊᴜsᴄᴜʟᴇs - version réduite des majuscules</li>
                <li><strong>Gras</strong> : 𝐆𝐫𝐚𝐬 - caractères en gras mathématique</li>
                <li><strong>Vieux texte anglais</strong> : 𝔳𝔦𝔢𝔲𝔵 𝔱𝔢𝔵𝔱𝔢 𝔞𝔫𝔤𝔩𝔞𝔦𝔰 - style médiéval</li>
                <li><strong>Texte à l'envers</strong> : ʇǝxʇǝ à l,ǝuʌǝɹs - texte retourné à 180°</li>
                <li><strong>Police serif</strong> : 𝐩𝐨𝐥𝐢𝐜𝐞 𝐬𝐞𝐫𝐢𝐟 - style avec empattements</li>
                <li><strong>Lettres cursives</strong> : 𝓵𝓮𝓽𝓽𝓻𝓮𝓼 𝓬𝓾𝓻𝓼𝓲𝓿𝓮𝓼 - style d'écriture à la main</li>
                <li><strong>Exposant</strong> : ᵉˣᵖᵒˢᵃⁿᵗ - texte en petit au-dessus de la ligne</li>
            </ul>
            
            <h4>Raccourcis clavier</h4>
            <ul>
                <li><kbd>Ctrl</kbd> + <kbd>Entrée</kbd> : Convertir le texte</li>
                <li><kbd>Échap</kbd> : Fermer les fenêtres contextuelles</li>
                <li><kbd>Ctrl</kbd> + <kbd>C</kbd> : Copier le texte stylisé lorsqu'il est sélectionné</li>
            </ul>
            
            <h4>Remarque</h4>
            <p>Certains styles utilisent des caractères Unicode spéciaux qui peuvent ne pas s'afficher correctement sur tous les appareils. Ces caractères sont principalement destinés aux réseaux sociaux et à la messagerie instantanée, où leur prise en charge est généralement bonne.</p>
        </div>
    </div>





<script>
// S'assurer que le module de plein écran est chargé
(function() {
    function initFullscreen() {
        if (!window.fullscreenManager) {
            import('../../js/fullscreen.js')
            .then(() => {
                if (!window.fullscreenManager && typeof FullscreenManager !== 'undefined') {
                    window.fullscreenManager = new FullscreenManager();
                }
            })
            .catch(error => {
                console.error('Erreur chargement fullscreen.js:', error);
            });
        } else {
            window.fullscreenManager.initFullscreenButtons();
        }
    }
    
    // Exécuter immédiatement si le DOM est déjà chargé, sinon attendre l'événement
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initFullscreen);
    } else {
        initFullscreen();
    }
})();
</script></div>

<script type="module">
    import { StyleTextManager, debugStyleText } from '/js/tools/styletext.js';
    
    // Initialiser le styliseur
    document.addEventListener('DOMContentLoaded', function() {
        StyleTextManager.init();
        
        // Exécuter le débogage après un court délai
        setTimeout(function() {
            console.log('Exécution du débogage depuis le module');
            if (typeof debugStyleText === 'function') {
                debugStyleText();
            } else {
                console.error('Fonction debugStyleText non disponible');
            }
        }, 1000);
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialiser l'aide et le bouton plein écran
        const helpBtn = document.getElementById('styletextHelp');
        const closeHelpBtn = document.getElementById('closeStyletextHelp');
        const helpPanel = document.getElementById('styletextHelpPanel');
        
        if (helpBtn && helpPanel && closeHelpBtn) {
            helpBtn.addEventListener('click', function() {
                helpPanel.classList.add('active');
            });
            
            closeHelpBtn.addEventListener('click', function() {
                helpPanel.classList.remove('active');
            });
        }
        
        // Boutons pour effacer et coller
        const clearTextBtn = document.getElementById('clearText');
        const pasteTextBtn = document.getElementById('pasteText');
        const inputText = document.getElementById('inputText');
        
        if (clearTextBtn && inputText) {
            clearTextBtn.addEventListener('click', function() {
                inputText.value = '';
                inputText.focus();
                StyleTextManager.applyCurrentStyle();
                updateCharacterCount();
            });
        }
        
        if (pasteTextBtn && inputText) {
            pasteTextBtn.addEventListener('click', function() {
                navigator.clipboard.readText()
                    .then(text => {
                        inputText.value = text;
                        StyleTextManager.applyCurrentStyle();
                        updateCharacterCount();
                    })
                    .catch(err => {
                        console.error('Erreur de collage:', err);
                        alert('Impossible d\'accéder au presse-papiers');
                    });
            });
        }
        
        // Compteur de caractères
        function updateCharacterCount() {
            const counter = document.getElementById('inputCounter');
            if (counter && inputText) {
                counter.textContent = inputText.value.length;
            }
        }
        
        if (inputText) {
            inputText.addEventListener('input', updateCharacterCount);
            // Initialiser le compteur
            updateCharacterCount();
        }
    });
    
    // Fonction globale pour afficher un toast
    function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `styletext-toast ${type}`;
        toast.textContent = message;
        
        document.body.appendChild(toast);
        
        // Animation d'entrée
        setTimeout(() => toast.classList.add('show'), 10);
        
        // Disparition après 3 secondes
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    }
</script>

<style>
:root {
    --primary-color: #4285f4;
    --primary-hover: #2b6de0;
    --accent-color: #fbbc05;
    --success-color: #34a853;
    --error-color: #ea4335;
    --light-gray: #f8f9fa;
    --med-gray: #dadce0;
    --dark-gray: #5f6368;
    --text-color: #202124;
    --white: #ffffff;
    --shadow-sm: 0 1px 2px rgba(60, 64, 67, 0.3);
    --shadow-md: 0 2px 6px rgba(60, 64, 67, 0.15);
    --radius: 8px;
    --transition: all 0.2s ease;
}

.styletext-layout {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    gap: 1.5rem;
    padding: 1rem;
    max-width: 1200px;
    margin: 0 auto;
}

@media (min-width: 992px) {
    .styletext-layout {
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto auto;
        grid-template-areas:
            "input output"
            "styles styles";
    }
    
    .styletext-input-area {
        grid-area: input;
    }
    
    .styletext-output-area {
        grid-area: output;
    }
    
    .styletext-styles-area {
        grid-area: styles;
    }
}

.styletext-textarea, 
.styletext-output {
    width: 100%;
    min-height: 180px;
    padding: 1rem;
    border: 1px solid var(--med-gray);
    border-radius: var(--radius);
    font-size: 1rem;
    line-height: 1.5;
    transition: var(--transition);
    resize: vertical;
}

.styletext-textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
}

.styletext-output {
    background-color: var(--light-gray);
}

.input-controls,
.output-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 0.5rem;
}

.character-count {
    color: var(--dark-gray);
    font-size: 0.875rem;
}

.input-actions {
    display: flex;
    gap: 0.5rem;
}

.control-btn {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.375rem 0.75rem;
    border: 1px solid var(--med-gray);
    border-radius: var(--radius);
    background: var(--white);
    color: var(--dark-gray);
    font-size: 0.875rem;
    cursor: pointer;
    transition: var(--transition);
}

.control-btn:hover {
    background-color: var(--light-gray);
    color: var(--text-color);
}

.primary-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    border: none;
    border-radius: var(--radius);
    background: var(--primary-color);
    color: var(--white);
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
}

.primary-btn:hover {
    background: var(--primary-hover);
    box-shadow: var(--shadow-sm);
}

.area-title {
    font-size: 1.25rem;
    color: var(--text-color);
    margin-bottom: 1rem;
    text-align: center;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--light-gray);
}

.style-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 1rem;
}

.style-item {
    position: relative;
    cursor: pointer;
}

.style-item input[type="radio"] {
    position: absolute;
    opacity: 0;
}

.style-item-content {
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
    padding: 1rem 0.5rem;
    border: 2px solid var(--med-gray);
    border-radius: var(--radius);
    transition: var(--transition);
    height: 100%;
}

.style-item:hover .style-item-content {
    border-color: var(--primary-color);
    background-color: rgba(66, 133, 244, 0.05);
}

.style-item input[type="radio"]:checked + .style-item-content {
    border-color: var(--primary-color);
    background-color: rgba(66, 133, 244, 0.1);
    box-shadow: 0 0 0 1px var(--primary-color);
}

.style-preview {
    font-size: 1.5rem;
    margin-bottom: 0.75rem;
    min-height: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.style-name {
    font-size: 0.8rem;
    color: var(--text-color);
    text-align: center;
}

/* Animation du changement de style */
@keyframes highlight {
    0% { background-color: var(--light-gray); }
    50% { background-color: rgba(66, 133, 244, 0.2); }
    100% { background-color: var(--light-gray); }
}

.style-changed {
    animation: highlight 0.6s ease;
}

/* Panel d'aide */
.help-panel {
    position: fixed;
    top: 0;
    right: -400px;
    width: 400px;
    height: 100vh;
    background-color: var(--white);
    box-shadow: var(--shadow-md);
    z-index: 1000;
    transition: right 0.3s ease;
    overflow-y: auto;
}

.help-panel.active {
    right: 0;
}

.help-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid var(--med-gray);
}

.help-panel-content {
    padding: 1.5rem;
}

.help-panel h4 {
    color: var(--primary-color);
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
}

.help-panel ul, .help-panel ol {
    padding-left: 1.5rem;
}

.help-panel li {
    margin-bottom: 0.5rem;
}

/* Toast notifications */
.styletext-toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 10px 20px;
    border-radius: var(--radius);
    background-color: var(--primary-color);
    color: white;
    box-shadow: var(--shadow-md);
    z-index: 1000;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.3s ease;
}

.styletext-toast.show {
    opacity: 1;
    transform: translateY(0);
}

.styletext-toast.success {
    background-color: var(--success-color);
}

.styletext-toast.error {
    background-color: var(--error-color);
}

.styletext-toast.info {
    background-color: var(--primary-color);
}
</style> 